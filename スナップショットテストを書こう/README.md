# スナップショットテストを書こう

## 課題1 
### 「スナップショットテストとはなんでしょうか？」
特定の出力結果に対して、以前の出力結果と比較し差分を検知するテスト。
主にUIのDOM上に意図しない変更がないか確認するために使われるが、
シリアライズ可能な出力であればテストできるため、用途は広いと考えられる。
例えば、取得データの多いSQLをチューニングする際に変更前後で差異がないことを確認したい場面など。

### 「スナップショットテストを用いることで、どのような不具合が防止できるでしょうか？3つほど例を挙げてみてください」
- レンダリングの変更を見逃すことで発生する表示崩れ
- SQLチューニングによるデグレード
- ...

### 「スナップショットテストでは防止できない不具合もあります。3つほど例を挙げてください」
- 初回のスナップショット生成時に見逃されたバグ
- CSSが適用されたUIの意図しない変化
- アニメーションなど、一連の動きの中のバグ


<br>

## 課題2



<br>

## 課題3
### Q1
### Q2
### Q3

<br>


## 参考記事 & メモ
> [スナップショットテスト · Jest](https://deltice.github.io/jest/docs/ja/snapshot-testing.html#:~:text=%E3%82%B9%E3%83%8A%E3%83%83%E3%83%97%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88%E3%81%AF,%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%81%A8%E6%AF%94%E8%BC%83%E3%81%97%E3%81%BE%E3%81%99%E3%80%82)
> スナップショットテストとビジュアルの回帰テストの違いは何ですか？ #
スナップショットテストとビジュアルの回帰テストはUIをテストする２つの独立した方法であり、目的が異なります。 ビジュアルの回帰テストツールはwebページのスクリーンショットを取得して出力された画像をピクセル単位で比較します。 スナップショットテストにおいてはシリアライズされた値をテキストファイルに格納して、異なるアルゴリズムで比較します。 考慮すべき異なるトレードオフがあり、私達がスナップショットテストを作成したことの理由はJest blogで挙げています。

> [CIで実行しないスナップショットテストがすごく便利](https://zenn.dev/adwd/articles/72f8d4734264e5)
> アニメーション要素のある画面が多く、ちょっとタイミングがずれると差分が出やすい

> [React Component テストを書くための考え方 | DevelopersIO](https://dev.classmethod.jp/articles/learn-react-component-test/)
> - 全てのコンポーネントをテストする必要はない
> - テストカバレッジの目標となるパーセンテージを守り、必要のないテストを書くのを避け、主となるコンポーネントの詳細度と信頼性を失わないようにする
> - そのためには、最小単位のコンポーネントの動作を担保する。つまるところ、それらの組み合わせで構成されているコンポーネントのテストは難しくならない
> - 複雑でないものから、複雑なものへ向かってテストしていく。 テスト過程で、単体コンポーネントに分離できそうなものは分離する。
> - 下記はテストしないものとする。
>   - 外部ライブラリのテスト
>   - 定数
>   - インラインスタイル
>   - 既にテスト済みのコンポーネント（import先でテスト済みであったりするもの）
> - 順序
>   - Snapshotテスト
>   - propsのテスト
>   - data(props等）の型チェック
>   - eventのテスト
>   - 条件や状態変化前後（domへのclass付け外し等）のテスト

> [Storyshotsが最高すぎる件 - Qiita](https://qiita.com/takanorip/items/786d8391e2bd99b67561)
> - StoryshotsはStorybookのアドオンで、Storybookに登録されているコンポーネントのスナップショットテストをしてくれます。できることはjestのスナップショットテストとほぼ同じです。
> 


- [スナップショットテストの向き不向きについて考えてみる - mizdra's blog](https://www.mizdra.net/entry/2021/02/04/003728)
- [Storyshotsを止めてスナップショットテストの仕組みを自作した話 | Wantedly Engineer Blog](https://www.wantedly.com/companies/wantedly/post_articles/421107)
- [ABEMAでスナップショットテストをやめてVisual Regression Testingに移行する話 | CyberAgent Developers Blog](https://developers.cyberagent.co.jp/blog/archives/29784/)
- [スナップショットテストのすゝめ - Qiita](https://qiita.com/kentt/items/c66fed793610e36de552)
- [ASCII.jp：UI開発の流れが変わる！React Storybookでデザイナーも開発者も幸せになれる](https://ascii.jp/elem/000/001/454/1454817/)
- [storybook起動時のみブラウザのコンソールでReact18のAPIエラーが出る](https://zenn.dev/tokiya_horikawa/scraps/1f97e4034ce072)